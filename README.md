# Game-Black-Sheep
Курсовая работа по реализации карточной игры Черная овечка на основе базы данных

# Документация API
Этот API предоставляет методы для аутентификации пользователей и основных операций с игрой.

## Основной URL

Основной URL для всех запросов API: https://se.ifmo.ru/~s338859/Game-Black-Sheep/api/


## Функции

### 1. **Аутентификация (`/auth.php`)**

Ожидает получение параметров `login` и `password` в запросе и возвращает токен при успешной аутентификации.

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/auth.php`
- **Content-Type:** `application/x-www-form-urlencoded`
  
#### Параметры
| Параметр   | Тип   | Описание                         | Пример   |
|------------|-------|----------------------------------|---------|
| `login`    | string| Логин пользователя              | `elina` |
| `password` | string| Пароль пользователя             | `elina2003` |

### 2. **Регистрация пользователя (`/register.php`)**

Позволяет пользователю зарегистрироваться в системе. Для регистрации необходимо передать логин и пароль. После успешной регистрации сервер возвращает токен аутентификации.

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/register.php`
- **Content-Type:** `application/x-www-form-urlencoded``

#### Параметры
| Параметр   | Тип    | Описание                          | Пример       |
|------------|--------|-----------------------------------|-------------|
| `login`    | string | Логин пользователя                | `elina`     |
| `password` | string | Пароль пользователя               | `elina2003` |

### 3. **Создание новой комнаты (`/create_room.php`)**

Позволяет пользователю создать новую игровую комнату. Для этого требуется токен аутентификации. Пользователь может указать количество игроков и время для хода.

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/create_room.php`
- **Content-Type:** `application/json`

#### Параметры
| Параметр           | Тип   | Описание                                      | Пример   |
|---------------------|-------|----------------------------------------------|---------|
| `amount_of_players` | int   | Количество игроков в комнате (по умолчанию 2) | `2`      |
| `time_for_move`     | int   | Время на ход в секундах (по умолчанию 60 сек)  | `123`     |

#### Пример запроса
{
  "amount_of_players": 2,
  "time_for_move": 123
}

### 4. **Присоединение к игре (`/join_game.php`)**

Позволяет авторизованному пользователю присоединиться к существующей комнате для игры. Для этого требуется токен аутентификации и идентификатор комнаты.

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/join_game.php`
- **Content-Type:** `application/json`

#### Параметры
| Параметр  | Тип   | Описание                                      | Пример   |
|-----------|-------|----------------------------------------------|---------|
| `roomId`  | int   | Идентификатор комнаты, к которой нужно присоединиться | `123`    |

#### Пример запроса
{
  "roomId": 63
}

### 5. **Список доступных комнат (`/list_available_rooms.php`)**

Позволяет авторизованному пользователю получить список доступных комнат для присоединения. Для этого требуется передать токен аутентификации.

#### Запрос
- **Метод:** `GET`
- **Эндпоинт:** `/list_available_rooms.php`
- **Content-Type:** `application/json`

#### Параметры
Нет параметров запроса, токен пользователя передается через сессию.

#### Пример запроса
https://se.ifmo.ru/~s338859/Game-Black-Sheep/api/list_available_rooms.php

## 6. **Удаление игрока из игры (`/remove_player.php`)**

Этот эндпоинт позволяет авторизованному пользователю удалить себя из существующей игры в указанной комнате. Для этого требуется токен аутентификации и идентификатор комнаты.

### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/remove_player.php`
- **Content-Type:** `application/json`

### Параметры
| Параметр  | Тип   | Описание                                      | Пример   |
|-----------|-------|----------------------------------------------|---------|
| `room`    | int   | Идентификатор комнаты, из которой нужно удалить игрока | `123`    |

### Пример запроса
{
  "room": 63
}


### 7. **Статус игры (`/get_game_status.php`)**

Позволяет авторизованному пользователю получить информацию о текущем статусе игры в указанной комнате. Проверка что пользователь состоит в этой комнате происходит на сервере. Для этого требуется передать токен аутентификации и идентификатор комнаты.

#### Запрос
- **Метод:** `GET`
- **Эндпоинт:** `/get_game_status.php`
- **Content-Type:** `application/json`

### Параметры
| Параметр  | Тип   | Описание                                      | Пример   |
|-----------|-------|----------------------------------------------|---------|
| `roomId`    | int   | Идентификатор комнаты, для которой нужно получить статус игры | `63`    |

#### Пример запроса
https://se.ifmo.ru/~s338859/Game-Black-Sheep/api/get_game_status.php?roomId=63


### 8. **Выбор одной карты(специальная карта крота)(`/select_one_card.php`)**

Позволяет игроку выбрать одну карту из доступных в игре. Для этого требуется токен аутентификации, идентификатор комнаты и идентификатор карты.

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/select_one_card.php`
- **Content-Type:** `application/x-www-form-urlencoded`

#### Параметры
| Параметр  | Тип   | Описание                                          | Пример   |
|-----------|-------|--------------------------------------------------|---------|
| `room`    | int   | Идентификатор комнаты, в которой выбирается карта | `63`    |
| `card`    | int   | Идентификатор карты, которую выбирает игрок      | `42`    |

### 9. **Запрос карты(специальная карта орла) (`/request_card.php`)**

Позволяет игроку запросить карту определенного типа для использования в игре. Для этого требуется токен аутентификации, идентификатор игрока и тип животного карты.

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/request_card.php`
- **Content-Type:** `application/x-www-form-urlencoded`

#### Параметры
| Параметр     | Тип   | Описание                                       | Пример   |
|--------------|-------|-----------------------------------------------|---------|
| `player`     | int   | Идентификатор игрока, который делает запрос   | `111`     |
| `animal_type`| string| Тип животного, карту которого хочет запросить игрок | `10` |

### 10. Вытягивание карты (`/draw_card.php`)

Позволяет авторизованному игроку вытянуть карту из колоды. Для этого требуется передать `playerId` и токен аутентификации.

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/draw_card.php`
- **Content-Type:** `application/json`

#### Параметры
| Параметр    | Тип   | Описание                                 | Пример    |
|-------------|-------|-----------------------------------------|----------|
| `playerId`  | int   | Идентификатор игрока, для которого нужно вытянуть карту | `1`       |

#### Пример запроса
{
  "playerId": 1
}

### 11. Размещение карт в зоопарке (`/place_in_zoo.php`)

Позволяет авторизованному игроку разместить карты в зоопарке. Для этого требуется передать список карт и идентификатор комнаты. 

#### Запрос
- **Метод:** `POST`
- **Эндпоинт:** `/place_in_zoo.php`
- **Content-Type:** `FormData`

#### Параметры
| Параметр    | Тип    | Описание                                 | Пример                |
|-------------|--------|-----------------------------------------|-----------------------|
| `room`      | int    | Идентификатор комнаты в игре            | `1`                   |
| `cards[]`   | array  | Массив с идентификаторами карт, которые нужно разместить в зоопарке | `[1, 2, 3]`           |

#### Пример запроса
```json
{
  "room": 1,
  "cards": [1, 2, 3]
}
