# Game-Black-Sheep
Курсовая работа по реализации карточной игры Черная овечка на основе базы данных

# Документация API

### Хранение токена в сессии

После успешной авторизации токен сохраняется в сессии пользователя, где потом проверяется во всех функциях.

### Подключение к базе данных db_connect.php

Этот файл содержит код для подключения к базе данных PostgreSQL с использованием PHP и PDO. В нем устанавливается подключение к базе данных с указанными параметрами и обрабатываются возможные ошибки подключения.


## Авторизация

### `POST /api/auth`
Этот метод позволяет пользователям войти в систему, предоставив свой логин и пароль. Если авторизация прошла успешно, возвращается токен сессии, который можно использовать для последующих запросов.

#### Параметры запроса:

- `login` ('elina'): Логин пользователя.
- `password` ('elina2003'): Пароль пользователя.

## Регистрация

### `POST /api/reg`
Этот метод позволяет зарегистрировать нового пользователя, предоставив логин и пароль. После успешной регистрации токен сессии сохраняется для дальнейших запросов.

#### Параметры запроса:

- `login` ('elina'): Логин пользователя.
- `password` ('elina2003'): Пароль пользователя.

## Вытаскивание карты

### `POST /api/draw_card`
Этот метод позволяет игроку вытянуть карту, если у него есть активная сессия и действующий токен. В ответе возвращаются данные о карте, включая её тип и дополнительные сообщения.

#### Параметры запроса:

- `playerId` ('123'): Идентификатор игрока, для которого требуется вытянуть карту.

## Получение статуса игры

### `POST /api/get_game_status`
Этот метод позволяет пользователю получить статус игры в указанной комнате. Для этого необходимо передать ID комнаты и иметь действующий токен сессии.

#### Параметры запроса:

- `roomId` ('123'): Идентификатор комнаты, для которой требуется получить статус игры.

## Присоединение к игре

### `POST /api/join_game`
Этот метод позволяет пользователю присоединиться к игре в указанной комнате. Для этого необходимо передать ID комнаты и иметь действующий токен сессии.

#### Параметры запроса:

- `roomId` ('123'): Идентификатор комнаты, к которой игрок хочет присоединиться.

## Список доступных комнат

### `POST /api/list_available_rooms`
Этот метод позволяет получить список доступных для игры комнат. Для этого необходимо иметь действующий токен сессии.

## Размещение карт в зоопарке

### `POST /api/place_in_zoo`
Этот метод позволяет игроку разместить карты в зоопарке. Для этого необходимо указать комнату и список карт, которые будут размещены. Токен сессии используется для авторизации запроса.

#### Параметры запроса:

- `room` (123): Идентификатор комнаты, в которой размещаются карты.
- `cards` ([123, 456, 789]): Список идентификаторов карт, которые игрок хочет разместить в зоопарке.

## Удаление игрока из игры

### `POST /api/remove_player_from_game`
Этот метод позволяет удалить игрока из текущей игры, указав идентификатор комнаты. Для выполнения операции необходим действующий токен сессии.

#### Параметры запроса:

- `room` (123): Идентификатор комнаты, из которой требуется удалить игрока.

## Запрос карты по типу животного

### `POST /api/request_card`
Этот метод позволяет игроку запросить карту определённого типа животного. Для выполнения запроса необходимо предоставить логин игрока и тип животного. Также требуется действующий токен сессии.

#### Параметры запроса:

- `player` (целое число): Идентификатор игрока, для которого выполняется запрос карты.
- `animal_type` (строка): Тип животного, для которого необходимо запросить карту (например, "lion", "tiger").

